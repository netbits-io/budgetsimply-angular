
<h1>Shared Expenses</h1>
<br>
<div class="row">
	<div class="col-sm-5">
			<div class="btn-group w100m44p" uib-dropdown>
				<button type="button" class="btn btn-default whiteButton w100p" uib-dropdown-toggle>
					{{shared.sharedwith}}&nbsp;&nbsp;<span class="caret"></span>
				</button>
				<ul uib-dropdown-menu role="menu" aria-labelledby="single-button">
					<li ng-repeat="user in shared.sharedwithlist" role="menuitem"><a ng-click="toggle(user)">{{user}}</a></li>
				</ul>
			</div>
		</div> 
		<div class="col-sm-5">
			<div class="input-group">
				<span class="input-group-btn">
					<button class="btn btn-default whiteButton" type="button" ng-click="shared.perMinus()"><span class="glyphicon glyphicon-chevron-left"></span></button>
				</span>
				<input type="text" class="form-control whiteButton text-center" ng-value="shared.periodLabel">
				<span class="input-group-btn">
					<button class="btn btn-default whiteButton" type="button" ng-click="shared.perToggle()"><span class="glyphicon glyphicon glyphicon-sort"></span></button>
					<button class="btn btn-default whiteButton" type="button" ng-click="shared.perPlus()"><span class="glyphicon glyphicon-chevron-right"></span></button>
				</span>
			</div>
		</div>	
		<div class="col-sm-2 text-right">
		</div>
	</div>
	<hr>
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>Date</th>
				<th>Tags</th>
				<th class="text-right">{{shared.me.email}}</th>
				<th class="text-right">{{shared.sharedwith}}</th>
				<th width="50"></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="entry in shared.expenses | periodfor:shared.periodString | onlyshared:shared.me.email:shared.sharedwith">
				<td>{{entry.date | date:'MMM dd'}}</td>
				<td>
					<span ng-repeat="tag in entry.tags">
						{{tag.text}}
					</span>		
				</td>
				<td class="text-right">{{entry | payedforshared:shared.me.email:shared.sharedwith }}</td>
				<td class="text-right">{{entry | payedforshared:shared.sharedwith:shared.me.email }}</td>
				<td class="text-right">
					<div class="btn-group" uib-dropdown >
						<button type="button" class="btn btn-xs btn-default whiteButton " uib-dropdown-toggle>
							<span ng-show="entry.owner === shared.me.email" class="glyphicon glyphicon-align-justify"></span>
							<span ng-show="entry.owner != shared.me.email" class="glyphicon glyphicon-scale"></span>
						</button>
						<ul uib-dropdown-menu role="menu" aria-labelledby="single-button">
							<li role="menuitem"><a ng-click="shared.modalViewExpense(entry)">view</a></li>
							<li role="menuitem" ng-show="entry.owner === shared.me.email"><a ng-click="shared.modalExpense(entry)">edit</a></li>
							<li role="menuitem" ng-show="entry.owner === shared.me.email"><a ng-click="shared.deleteExpense(entry._id)">remove</a></li>
						</ul>
					</div>
				</td>
			</tr>
			<tfoot>
				<tr>
					<td>TOTALS:</td>
					<td></td>
					<td class="text-right"> {{shared.expenses | periodfor:shared.periodString | onlyshared:shared.me.email:shared.sharedwith | calctotalforshared:shared.me.email:shared.sharedwith }}</td>
					<td class="text-right"> {{shared.expenses | periodfor:shared.periodString | onlyshared:shared.me.email:shared.sharedwith | calctotalforshared:shared.sharedwith:shared.me.email }}</td>
					<td></td>
				</tr>
			</tfoot>
		</tbody>
	</table>

<div class="row">
	<div class="col-sm-12 text-right pad25lr">
		<b><span> 
			{{ shared.expenses | periodfor:shared.periodString | onlyshared:shared.me.email:shared.sharedwith | calcdiff:shared.me.email:shared.sharedwith }}
		</span></b>
	</div>
</div>

<br>
